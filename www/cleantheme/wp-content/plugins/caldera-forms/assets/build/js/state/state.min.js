function CFState(a,b){function c(a){return h.hasOwnProperty(a)}function d(a){var c=b("#"+a);return c.length?(c.on("change keyup",function(){var a=b(this);e.mutateState([a.attr("id")],a.val())}),!0):(c=b("."+a),c.length?(c.on("change",function(){var a,c,d=[],f=b(this),g=f.attr("type");switch(g){case"radio":a=f.data("radio-field"),c=b("[data-radio-field="+a+"]"),d="";break;case"checkbox":a=f.data("checkbox-field"),c=b("[data-checkbox-field="+a+"]");break;default:a=f.data("field"),c=b("[data-field="+a+"]")}c.each(function(a,c){var e=b(c);e.prop("checked")&&("radio"===g?d=e.val():d.push(e.val()))}),e.mutateState(a,d)}),!0):(e.unbind(a),!1))}var e=this,f=new CFEvents(this),g={},h={};this.init=function(a){for(var b in a)d(b)?h[b]=a[b]:(h[b]="",g[b]=!0)},this.getState=function(a){return!!c(a)&&h[a]},this.mutateState=function(a,b){return!!c(a)&&(h[a]!=b&&(h[a]=b,f.trigger(a,b)),!0)},this.unbind=function(a){e.mutateState(a,""),g[a]=!0},this.rebind=function(a){d(a),delete g[a]},this.events=function(){return{subscribe:function(a,b){c(a)&&f.subscribe(a,b)},detach:function(a,b){f.detach(a,b)}}}}